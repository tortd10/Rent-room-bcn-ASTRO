---
import ContactForm from "@/components/ContactForm.astro"
import FindRoom from "@/components/FindRoom.astro"
import OurFlats from "@/components/OurFlats.astro"
import OurRoom from "@/components/OurRoom.astro"
import i18next from "@/i18n/config.js"
import Layout from "@/layouts/Layout.astro"

export const SUPPORTED_LANGS = ['es', 'en'] as const;

// 2. LUEGO exporta getStaticPaths
export async function getStaticPaths() {
  return SUPPORTED_LANGS.map(lang => ({
    params: { lang }
  }));
}

// 3. FINALMENTE usa el código de la página
const lang = Astro.params.lang || "es";

if (!SUPPORTED_LANGS.includes(lang)) {
  return Astro.redirect('/404');
}

const translations = i18next.getResourceBundle(lang, "translation")
const findRoom = translations.FindRoom

export const prerender = true
---

<Layout title={`RentRoomBcn - ${findRoom.find_room}`}>
  <FindRoom />
  <OurRoom />
  <OurFlats />
  <ContactForm />
</Layout>